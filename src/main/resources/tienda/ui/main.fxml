<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="tienda.controller.VentaController"
            prefHeight="600.0" prefWidth="800.0">

    <VBox spacing="10" AnchorPane.topAnchor="10.0"
          AnchorPane.leftAnchor="10.0"
          AnchorPane.rightAnchor="10.0"
          AnchorPane.bottomAnchor="10.0">

        <!-- Panel Superior - SelecciÃ³n de Productos -->
        <GridPane hgap="10" vgap="10">
            <padding>
                <Insets bottom="10"/>
            </padding>

            <Label text="Producto:"
                   GridPane.columnIndex="0" GridPane.rowIndex="0"/>
            <ComboBox fx:id="cboProductos"
                      promptText="Seleccione un producto"
                      prefWidth="300.0"
                      GridPane.columnIndex="1" GridPane.rowIndex="0"/>
            <Label text="Precio:"
                   GridPane.columnIndex="0" GridPane.rowIndex="1"/>
            <TextField fx:id="txtPrecio"
                       editable="false"
                       prefWidth="150.0"
                       GridPane.columnIndex="1" GridPane.rowIndex="1"/>
            <Label text="Cantidad:"
                   GridPane.columnIndex="2" GridPane.rowIndex="0"/>
            <Spinner fx:id="spnCantidad"
                     prefWidth="100.0"
                     GridPane.columnIndex="3" GridPane.rowIndex="0"/>
            <Label text="Importe:"
                   GridPane.columnIndex="2" GridPane.rowIndex="1"/>
            <TextField fx:id="txtImporte"
                       editable="false"
                       prefWidth="150.0"
                       GridPane.columnIndex="3" GridPane.rowIndex="1"/>
            <Button fx:id="btnAgregar"
                    text="Agregar al Carrito"
                    onAction="#handleAgregarProducto"
                    prefWidth="150.0"
                    GridPane.columnIndex="4" GridPane.rowIndex="0"/>
        </GridPane>

        <!-- Tabla de Carrito -->
        <TableView fx:id="tblCarrito" VBox.vgrow="ALWAYS">
            <columns>
                <TableColumn fx:id="colProducto"
                             text="Producto"
                             prefWidth="300"/>
                <TableColumn fx:id="colCantidad"
                             text="Cantidad"
                             prefWidth="100"/>
                <TableColumn fx:id="colPrecio"
                             text="Precio Unit."
                             prefWidth="150"/>
                <TableColumn fx:id="colSubtotal"
                             text="Subtotal"
                             prefWidth="150"/>
            </columns>
            <placeholder>
                <Label text="No hay productos en el carrito"/>
            </placeholder>
        </TableView>

        <!-- Panel Inferior - Totales y Botones -->
        <HBox spacing="10" alignment="CENTER_RIGHT">
            <padding>
                <Insets top="10"/>
            </padding>

            <Button fx:id="btnQuitar"
                    text="Quitar Producto"
                    onAction="#handleQuitarProducto"
                    prefWidth="150.0"/>

            <Region HBox.hgrow="ALWAYS"/>

            <Label fx:id="lblTotal"
                   text="S/. 0.00"
                   style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

            <Button fx:id="btnFinalizar"
                    text="Finalizar Venta"
                    onAction="#handleFinalizarVenta"
                    prefWidth="150.0"
                    style="-fx-base: #4CAF50; -fx-text-fill: white;"/>
        </HBox>
    </VBox>
</AnchorPane>